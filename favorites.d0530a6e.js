function t(t,e,a,s){Object.defineProperty(t,e,{get:a,set:s,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},r={},n=a.parcelRequire07b5;null==n&&((n=function(t){if(t in s)return s[t].exports;if(t in r){var e=r[t];delete r[t];var a={id:t,exports:{}};return s[t]=a,e.call(a.exports,a,a.exports),a.exports}var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){r[t]=e},a.parcelRequire07b5=n),n.register("kyEFX",(function(e,a){var s,r;t(e.exports,"register",(function(){return s}),(function(t){return s=t})),t(e.exports,"resolve",(function(){return r}),(function(t){return r=t}));var n={};s=function(t){for(var e=Object.keys(t),a=0;a<e.length;a++)n[e[a]]=t[e[a]]},r=function(t){var e=n[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),n("kyEFX").register(JSON.parse('{"dFrGZ":"favorites.d0530a6e.js","lp5u4":"sprite.7aa8ebb7.svg","h5tdm":"favorites.ec813ca8.js","h10Dp":"favorites.aabf74e7.js"}')),n("hV168"),n("7Th1V"),n("imn7x");var i,o=n("2shzp");i=new URL(n("kyEFX").resolve("lp5u4"),import.meta.url).toString();var c=n("7Y9D8");const l=t=>`<div class='favorites__rating'>\n              <div class="favorites__rating-body">\n                <div class="favorites__rating-active"><div class='favorites__cards-rating'>${t}</div>${(t=>{const a=Math.round(t),s=`<svg class="favorites__star-active"><use href="${e(i)}#icon-star"></use></svg>`,r=`<svg class="favorites__star-notActive"><use href="${e(i)}#icon-star-grey"></use></svg>`;let n=[];for(let t=1;t<=5;t+=1)n.push(t>a?r:s);return n.join("")})(t)}</div>\n                <div class="favorites__rating-items">\n                  <input type="radio" class="favorites__rating-item" value="1" name="rating">\n                  <input type="radio" class="favorites__rating-item" value="2" name="rating">\n                  <input type="radio" class="favorites__rating-item" value="3" name="rating">\n                  <input type="radio" class="favorites__rating-item" value="4" name="rating">\n                  <input type="radio" class="favorites__rating-item" value="5" name="rating">\n                </div>\n              </div>\n  \n    </div>`,f=t=>{var a;return(a=t,a.map((({data:t})=>`\n        <li class="favorites__cards-item">\n        <button type="button" id="#${t._id}" class="icon-button" data-category="${t.category}" aria-label="Heart"><svg class="favorites__heart heart-isActive"><use href="${e(i)}#icon-heart"></use></svg></button>\n          <div class="favorit__img-thumb"><img src="${t.preview}" alt="${t.title}" width="335"></div>\n          <div class="favorites__cards-thumb">\n            <h2 class="favorites__cards-title">${t.title}</h2>\n            <p class="favorites__cards-text">${t.description}</p>\n            <div class="favorites__rating-thumb">\n              ${l(t.rating)}\n              <button class="favorites__cards-btn js-card-button" data-id="${t._id}">See recipe</button>\n            </div>\n          </div>\n        </li>`))).join("")},v=()=>`<svg class="favorites__empty-img">\n      <use href="${e(i)}#icon-elements"></use>\n    </svg>\n    <p class="favorites__text">It appears that you haven't added any recipes to your favorites yet. To get started, you can add recipes that you like to your favorites for easier access in the future.</p>`,d=t=>{try{const e=localStorage.getItem(t);if(e)return JSON.parse(e)}catch(t){console.error("Error while parsing local storage data:",t)}},u=()=>e(c).Report.failure("Error","Oops! Something went wrong! Try reloading the page!","OK"),g=async t=>{const e=t.map((async t=>{const e=await(async t=>{try{const e=await o.default.get(`https://tasty-treats-backend.p.goit.global/api/recipes/${t}`);if(404===e.status)throw new Error("Page not found error 404");return e}catch{u()}})(t);return e}));return await Promise.all(e)},_=async t=>{try{const e=(await g(t.map((t=>t.id)))).map((t=>t.data.category));return(t=>{const e=[];for(const a of t)e.includes(a)||e.push(a);const a=e.map((t=>`<li><button type="button" class="favorites__filter-btn">${t}</button></li>`));return a.unshift('<li><button type="button" class="favorites__filter-btn favorites__active-btn">All categories</button></li>'),a})(e).join("")}catch(t){console.log(t),u()}},p=async(t,e,a)=>{try{const s=await g(t.map((t=>t.id))),r=(e-1)*a,n=r+a,i=s.slice(r,n);return f(i)}catch(t){u(),console.log(t)}},y=document.querySelector(".favorites__empty"),m=document.querySelector(".favorites__img"),h=document.querySelector(".favorites__list-filter"),w=document.querySelector(".favorites__list-cards"),b=document.querySelector(".favorites__pagination"),S=(document.querySelector(".favorites__list-cards-thumb"),document.querySelector(".favorites__container-cards")),L=window.innerWidth;function H(t,a){let s="",r=null,n=a-1,o=a+1;s+=`<li class="favorites__pagination-item">\n    <div class="favorites__pag-container start-container">\n      <svg class="favorites__start-arrow-first">\n        <use href="${e(i)}#icon-arrow"></use>\n      </svg>\n      <svg class="favorites__start-arrow-second">\n        <use href="${e(i)}#icon-arrow"></use>\n      </svg>\n    </div>\n  </li>\n  <li class="favorites__pagination-item">\n    <div class="favorites__pag-container prew-container">\n      <svg class="favorites__prew-arrow">\n        <use href="${e(i)}#icon-arrow"></use>\n      </svg>\n    </div>\n  </li>`,a>2&&(s+='<li class="favorites__pagination-item">\n    <span class="favorites_page-dots-first">...</span>\n  </li>'),L>=768&&(a==t&&(n-=1),1==a&&(o+=1));for(let e=n;e<=o;e++)if(!(e>t)){if(L>=768)0==e&&(e+=1);else if(e<=0)continue;r=a==e?"favorites__active-btn":"",s+=`<li class="favorites__pagination-item ${r}">\n    <span class="favorites__pag-page">${e}</span>\n  </li>`}a<t-1&&(s+='<li class="favorites__pagination-item">\n    <span class="favorites_page-dots-first">...</span>\n  </li>'),s+=`<li class="favorites__pagination-item">\n    <div class="favorites__pag-container next-container">\n      <svg class="favorites__next-arrow">\n        <use href="${e(i)}#icon-arrow"></use>\n      </svg>\n    </div>\n  </li>\n  <li class="favorites__pagination-item">\n    <div class="favorites__pag-container end-container">\n      <svg class="favorites__end-arrow-first">\n        <use href="${e(i)}#icon-arrow"></use>\n      </svg>\n      <svg class="favorites__end-arrow-second">\n        <use href="${e(i)}#icon-arrow"></use>\n      </svg>\n    </div>\n  </li>`,b.innerHTML=s}const $=async(t,e,a,s)=>{let r=Number(localStorage.getItem("page"));if(r||(r=1),t.target.closest(".start-container")){r=1;const t=await p(e,r,a);w.innerHTML=t,H(s,r),localStorage.setItem("page",r)}if(t.target.closest(".favorites__prew-arrow")&&1!==r){r-=1;const t=await p(e,r,a);w.innerHTML=t,H(s,r),localStorage.setItem("page",r)}if(t.target.closest(".favorites__pag-page"))try{r=Number(t.target.textContent);const n=await p(e,r,a);w.innerHTML=n,H(s,r),localStorage.setItem("page",r)}catch(t){console.error("An error occurred:",t)}if(t.target.closest(".favorites__next-arrow")&&r!==s){r+=1;const t=await p(e,r,a);w.innerHTML=t,H(s,r),localStorage.setItem("page",r)}if(t.target.closest(".end-container")){r=s;const t=await p(e,r,a);w.innerHTML=t,H(s,r),localStorage.setItem("page",r)}};n("jyXRc"),n("6ic0E"),n("iFJJL");const T=window.innerWidth;let M=12;T<768&&(M=9);let x=d("favorites"),E=null;const j=()=>{w.innerHTML=`<li class="favorites__list-cards-thumb">${v()}</li>`,w.style.justifyContent="center"},q=async t=>{const e=t.target.closest(".icon-button");if(!e)return;const a=t.target.closest(".favorites__cards-item");if(a){a.classList.toggle("is-Hidden-F"),x=x.filter((t=>t.id!==e.id.slice(1)));const t=await _(x);h.innerHTML=t,E=Math.ceil(x.length/M);const s=await p(x,1,M);w.innerHTML=s,H(E,1),1===E&&(b.style.display="none"),0===x.length&&j()}const s=e.id.slice(1),r=e.getAttribute("data-category"),n=d("favorites")||[],i=n.findIndex((t=>t.id===s));-1!==i?n.splice(i,1):n.push({id:s,category:r}),localStorage.setItem("favorites",JSON.stringify(n));e.querySelector(".favorites__heart").classList.toggle("heart-isActive")};document.querySelector(".favorites__list-filter").addEventListener("click",(async t=>{const e=t.target;if("button"!==e.type)return;(t=>{if(t.classList.contains("favorites__filter-btn")){const e=document.querySelector(".favorites__active-btn");e&&e.classList.remove("favorites__active-btn"),t.classList.add("favorites__active-btn")}})(e);let a=x;if("All categories"!==e.textContent&&(a=x.filter((t=>t.category===e.textContent))),console.log(a),0!==a.length){localStorage.setItem("page",1),E=Math.ceil(a.length/M),b.style.display=E>1?"flex":"none",H(E,1);const t=await p(a,1,M);w.innerHTML=t,w.style.justifyContent="start"}else j();return 1})),b.addEventListener("click",(t=>{$(t,x,M,E)})),(async()=>{if(b.style.display="none",x=d("favorites")||[],T<768&&0===x.length&&(w.style.minHeight="100hv"),0===x.length)return T<768&&(m.style.display="none"),(t=y).classList.add("empty"),t.insertAdjacentHTML("beforeend",v()),void S.classList.toggle("is-Hidden-F");var t;m.style.display="block",E=Math.ceil(x.length/M);const e=await _(x);if(!e)return h.style.display="none",void(w.innerHTML='\n    <li class="error-message"><h2>Error</h2>\n    <p>Oops! Something went wrong! Try reloading the page!</p></li>');const a=await p(x,1,M);h.innerHTML=e,w.innerHTML=a,E>1&&(b.style.display="flex",H(E,1)),w.addEventListener("click",q)})(),window.addEventListener("beforeunload",(()=>{localStorage.removeItem("page")}));
//# sourceMappingURL=favorites.d0530a6e.js.map
